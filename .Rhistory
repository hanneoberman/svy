society <- readRDS("Understanding Society innovation pnel wave A.RDS")
require(survey)
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
require(survey)
require(survey)
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
summary(society)
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
summary(society)
head(society)
require(survey)
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
head(society)
summary(society$a_ivfio)
society$a_ivfio["Full interview"|"Youth interview"]
society$a_ivfio["Full interview"]#|"Youth interview"]
society$a_ivfio == "Full interview" |"Youth interview"
sum(society$a_ivfio == "Full interview" |"Youth interview")
society$a_ivfio == "Full interview"
sum(society$a_ivfio == "Full interview", society$a_ivfio ==  "Youth interview")
sum(society$a_ivfio == "Full interview")#, society$a_ivfio ==  "Youth interview")
sum(society[a_ivfio == "Full interview"])#, society$a_ivfio ==  "Youth interview")
sum(society$a_ivfio ==  "Youth interview") #the interviews with children
summary(society$a_ivfio) #what's in the variable?
sum(society$a_ivfio == "Full interview") #the full interviews with adults
sum(society$a_ivfio ==  "Youth interview") #the interviews with children
summary(society$a_ivfio) #what's in the variable?
sum(society$a_ivfio == "Full interview") #the full interviews with adults
sum(society$a_ivfio ==  "Youth Interview") #the interviews with children
summary(society$a_ivfio) #what's in the variable?
adults <- sum(society$a_ivfio == "Full interview") #the full interviews with adults
youths <- sum(society$a_ivfio ==  "Youth Interview") #the interviews with children
sum(adults, youths) #all personally completed interviews
---
title: "Understanding Society"
output:
html_notebook:
theme: paper
---
**Introduction**
The Innovation Panel is...
Multistage stratified cluster sampling was used...
Central to this research report are the following research questions: '...'.
First we look at the sampling design and design weights, next population estimates are computed, and finally the effect of non-response on the estimates is investigated, as well as possible sources of non-response error.
The data:
```{r}
require(survey)
society <- readRDS("Understanding Society innovation pnel wave A.RDS")
society$a_dvage <- as.numeric(society$a_dvage)
head(society)
```
**Sampling Design**
"Include descriptions of your frame and target and population, intended sample size, and method of sample selection. Discuss potential non-sampling, sampling, and non-response errors" (Assignment 6, fox, 2018).
*1. The Innovation panel would interview multiple people from every household, but in the case households are very large, a Kish Grid is used. Can you explain why the Kish Grid is a popular method to do within-household selection of respondents?*
The Kish Grid method is used to select respondents in a household at random. This method considered to lead to a random sample of household members, and avoids selection bias in the survey.
It is a popular method because when carried out correctly, it leads to (almost) equal probability sampling, something other selection methods do not obtain. Moreover, the only information you need in order to select respondents is a list containing the names of the persons in the household you want to sample.
**Design Weights**
*2. Despite the complex data structure, the design weights as included in the variable "a_psnenip_xd" have a very low variance. Can you explain why this is the case?*
```{r]
```
Lower MSE (Lohr, p. 286), and application from IP User Guide.
*3. Apart from the design weight, an enumerated design weight "a_psnenip_xw" is also included. Please show using syntax in R how you can calculate this weight.*
```{r}
# None of the age groups have 7 groups
# Too many levels, have to find groups
levels(society$a_gor_dv)
# Calculate household weight (or use design weight?)
# Calculate weight post-stratified for sex, age and government region.
```
**Population Esitimates**
*4. What is the proportion of employed people of working age (15-64) in the population?*
```{r}
# First, we investigate the a_employ variable.
levels(society$a_employ[society$a_dvage > 15 & society$a_dvage < 64])
# The variable a_employ has seven levels.
summary(society$a_dvage[society$a_employ=="yes"])
summary(society$a_dvage[society$a_employ=="no"])
# Yes and no contain people of over 21 years of age.
society[society$a_employ=="missing",]
# Missing does not appear in the data
society[society$a_employ=="inapplicable",]
# Inapplicable seems to contain all children and youths of 21 years and younger
# It cannot be assumed that none of them is employed. It can however be assumed that only a
# small part of them is employed, as children under 15 cannot legally work.
society[society$a_employ=="proxy respondent",]
# No rows returned
society[society$a_employ=="refuse",]
society[society$a_employ=="don\'t know",]
# Both refuse and don't know contain one row. These can be treated as missing data.
# Thus, our goal is to compare the proportion of employed people (yes) of working age against
# the number of unemployed people (no, inapplicable), excluding the missing data (refuse, don't know)
society$a_dvage <- as.numeric(society$a_dvage)
with(society, society[a_employ=="yes" & a_dvage >64,])
# There are people older than 64 still working, we should take those out.
with(society, society[a_employ=="yes" & a_dvage <15,])
# No one younger than 15 years is reported to be working, which is to be expected as it was not
# a question asked to people under 21 years of age.
# Since we wish to know the proportion of employed people of working age, we need 2 groups, one with employed adults and one with unemployed adults and employed elderly.
society$employ_dv <- as.numeric(0)
society$employ_dv[society$a_employ=='yes' & society$a_dvage <= 65] <- 1
# Now we can calculate the proportion
Design <- svydesign(ids=~a_hidp, strata=~a_strata, data=society, weights=~a_psnenip_xw)
Nonmiss <- with(Design, subset(Design, a_employ!="refuse" & a_employ!="don\'t know"))
svymean(~employ_dv, Design)
# 43,3% of the population is employed.
# Add 95% CI for the estimate.
```
*5. Please investigate the relationship between age and household composition for the population of Great Britain.*
*a. Investigate which age variable you should use*
For householdcomposition, with/without children is key.
Therefore, young children's ages do not matter as much, but 15-20 is expected to have more variance and should thus be over-sampled.
*b. Construct a new variable "household_composition" from the following four variables: "a_livesp_dv, a_cohab_dv, a_single_dv, a_mastat_dv".*
First, create variable household size:
```{r}
# Household size: count for each household, how many persons there are in.
# a_hidp - Household identifier
count <- as.matrix(table(society$a_hidp)) # number of occurences of each a_hidp (indicator of size of household)
summary(count)
# create variable to assign household size to each individual person
society$household_size <- NA
for (i in rownames(count)) { # for each household..
society$household_size[society$a_hidp == i] <- count[i,] # maybe this can be written into nicer R code.
}
```
Couple (with/without children)
Single adult (with/without children)
Other type of household (with/without children)
Household information data
a_marstat - Legal marital status
a_livesp - Living with spouse
a_livewith - Living as part of a couple in household
a_adresp15 - Adult responsible for child age < 15
a_adresp17 - Adult responsible for child age < 17
a_livesp_dv - Living with spouse
a_cohab_dv - Living with cohabitee
a_single_dv - Single in household
a_mastat_dv - De facto marital status
a_depchl_dv - Whether person is a dependent child
a_rach16_dv - Whether responsible for a child under 16
a_respm16_dv - Whether natural/adoptive/step mother of child under 16
a_respf16 dv - Whether natural/adoptive/step father of child under 16
a_nchild_dv - Number of own children in household
a_ndepchl_dv - Number of own dependent children in household
*c.Which weight should you use here?*
For this analysis, we want to use a weight per person (PSN), as it is impossible to calculate age per household. We also want to use the enumeration grid weights (EN), as both age and household composition have no missing values. We want the weights of the first wave (IP), as that is the one we are investigating. Finally, we want to use the stratified weights (XW) rather than the design weights, as we are investigating population values and not sample values. Thus, we want to use the weight a_psnenip_xw, as this is the only weight that covers the correct data in the correct way.
*Lastly, compute population correlation estimate.*
**Non-response**
*6. Not all sample members you included in questions 1-5 participated in the survey. Use the variable "a_ivfio" to investigate how many people personally conducted an interview.*
```{r}
summary(society$a_ivfio) #what's in the variable?
adults <- sum(society$a_ivfio == "Full interview") #the full interviews with adults
youths <- sum(society$a_ivfio ==  "Youth Interview") #the interviews with children
sum(adults, youths) #all personally completed interviews
```
*7. Repeat your analysis under question 4. Use only the people who personally did an interview. What is your conclusion? Is there a difference between respondents and nonrespondents when it comes to their employment?*
*8. Using only variables from this dataset, can you find variables which could potentially be useful for constructing nonresponse weights? Why these variables?*
- Indicate responders vs. nonresponders (see also Q6)
- Collect auxiliary variables: look into age and gender specifically, but more general:
Identifiers of person
a_gor_dv - Government office region
a_urban_dv - Urban or rural area, derived
Personal data
a_sex - Sex
a_racel_dv - Ethnic group
a_employ - employment status
a_ageest - Estimated age
a_ageif - Age last birthday
a_dvage - Age for whole sample
a_agegr5_dv - Age group: 5-year intervals
a_agegr10_dv - Age group: 10-year intervals
a_agegr13_dv - Age group: 13 categories
Household information data
a_marstat - Legal marital status
a_livesp - Living with spouse
a_livewith - Living as part of a couple in household
a_adresp15 - Adult responsible for child age < 15
a_adresp17 - Adult responsible for child age < 17
a_livesp_dv - Living with spouse
a_cohab_dv - Living with cohabitee
a_single_dv - Single in household
a_mastat_dv - De facto marital status
a_depchl_dv - Whether person is a dependent child
a_rach16_dv - Whether responsible for a child under 16
a_respm16_dv - Whether natural/adoptive/step mother of child under 16
a_respf16 dv - Whether natural/adoptive/step father of child under 16
a_nchild_dv - Number of own children in household
a_ndepchl_dv - Number of own dependent children in household
Interview data
a_hhresp_dv - Household response status
- Compare population and response distributions for each auxiliary variable (look if some groups are overrepresented in the sample)
- Compute weighting model via statistical logistic regression.. or? via article?
- How to evaluate usefulness of variables --> how good they are in predicting response?
question: should we include the propensity to participate regarding to whether rest of the household participated..? how? "The adjustment is to be made in two stages, corresponding to household and individual non-response respectively."
question: variables in the dataset as given or also include constructed variables like household_size, type etc?
```{r}
society$response <- society$a_ivfio ==  "Youth Interview" | society$a_ivfio == "Full interview" # logical indicator of whether person participated in the survey: whether an interview was conducted T/F.
```
summary(society$a_psnenip_xd)
sd(society$a_psnenip_xd)
var(society$a_psnenip_xd)
Var. <- var(society$a_psnenip_xd)
cbind(summary(society$a_psnenip_xd), Var.)
cbind(t(summary(society$a_psnenip_xd)), Var.)
round(Descr., 2)
Descr. <- cbind(t(summary(society$a_psnenip_xd)), Var.)
round(Descr., 2)
